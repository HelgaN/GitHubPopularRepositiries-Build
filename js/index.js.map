{"version":3,"file":"index.js","sources":["js/service/service.js","js/templates/item-template.js","js/templates/item-filter-template.js","js/tools/tools.js","js/index.js"],"sourcesContent":["class GitHubService {\r\n  constructor() {\r\n    this._apiBase = `https://api.github.com/search/repositories?q=`;\n    this.stars = 50000;\r\n  }\r\n\r\n  async getResourse(url) {\n    const resp = await fetch(`${this._apiBase}${url}&per_page=100`);\r\n\r\n    if(!resp.ok) {\r\n      throw new Error(`Could not fetch ${url}`, `received ${url.status}`);\r\n    }\r\n\r\n    return await resp.json();\r\n  }\r\n\r\n  async getPopularRepositories() {\r\n    const query = await this.getResourse(`stars:>=${this.stars}`);\r\n    return query;\r\n  }\r\n}\r\n\r\nexport default GitHubService;\n","const itemTemplate = (item) => {\r\n  return `\r\n    <tr class=\"table-light\">\r\n      <td><img class=\"avatar\" src=\"${item.owner.avatar_url}\"></td>\r\n      <td>${item.name}</td>\r\n      <td>${item.owner.login}</td>\r\n      <td>${item.stargazers_count}</td>\r\n      <td>${item.language !== null ? item.language : \"content\"}</td>\r\n      <td>${item.updated_at.slice(0, 10)} ${item.updated_at.slice(11, -1)}</td>\r\n      <td colspan=\"2\">\r\n        <a class=\"table-link\" href=\"${item.svn_url}\">${item.svn_url}</a>\r\n      </td>\r\n    </tr>\r\n  `;\r\n}\r\n\nexport default itemTemplate;\n","const itemFilterTemplate = (item) => {\r\n  return `<a class=\"dropdown-item\" href=\"#\">${item}</a>`\r\n}\r\n\nexport default itemFilterTemplate;\n","const createUniqueList = (array) => Array.from(new Set(array));\r\n\r\nconst sortByOldest = (data) => {\r\n  let dataSort = [...data].sort(function compareAge(item1, item2) {\r\n    const date1 = new Date(item1.updated_at);\r\n    const date2 = new Date(item2.updated_at);\r\n    return date1 - date2;\r\n  });\r\n  return dataSort;\r\n};\r\n\r\nconst sortByNewest = (data) => {\r\n  let dataSort = [...data].sort(function compareAge(item1, item2) {\r\n    const date1 = new Date(item1.updated_at);\r\n    const date2 = new Date(item2.updated_at);\r\n    return date2 - date1;\r\n  });\r\n  return dataSort;\r\n};\n\nconst searchActiveEl = (wrapper) => {\n  return wrapper.querySelector(\".active\");\n}\n\nconst removePreloader = (className) => {\n  document.querySelector(`.${className}`).style.backgroundImage = \"none\";\n}\n\nexport {createUniqueList, sortByNewest, sortByOldest, searchActiveEl, removePreloader};\n","import GitHubService from \"./service/service\";\nimport itemTemplate from \"./templates/item-template\";\nimport itemFilterTemplate from \"./templates/item-filter-template\";\nimport {\n  createUniqueList,\n  sortByNewest,\n  sortByOldest,\n  searchActiveEl,\n  removePreloader\n} from \"./tools/tools\";\n\nclass App {\n  constructor() {\n    this.repsList = document.getElementById(\"reps-list\");\n    this.langList = document.getElementById(\"lang\");\n    this.updateList = document.getElementById(\"update\");\n    this.reset = document.querySelector(\".btn-reset\");\n  }\n\n  createRepList(data) {\n    let list = data.items.map((item) => itemTemplate(item));\n    this.repsList.innerHTML = list.join(\"\");\n  }\n\n  createLangList(data) {\n    let langArray = [];\n    data.forEach((item) => langArray.push(item.language !== null ? item.language : \"content\"));\n    const uniqueLangList = createUniqueList(langArray);\n\n    let list = uniqueLangList.map((item) => itemFilterTemplate(item));\n    list.push(itemFilterTemplate(\"all\"));\n    this.langList.innerHTML += list.join(\"\");\n  }\n\n  creatUpdateList(data) {\n    const list = data.map((item) => itemFilterTemplate(item));;\n    this.updateList.innerHTML += list.join(\"\");\n  }\n\n  initializeEvents(data) {\n    this.langList.addEventListener(\"click\", (evt) => {\n      evt.preventDefault();\n      const langLinks = lang.querySelectorAll(\".dropdown-item\");\n      langLinks.forEach((link) => link.classList.remove(\"active\"));\n      evt.target.classList.add(\"active\");\n      let filterName = evt.target.innerText;\n      if(evt.target.innerText === \"content\") {\n        filterName = null;\n      }\n\n      let dataFilter;\n\n      filterName !== \"all\"\n      ? dataFilter = {\n        items: data.filter(item => item.language == filterName)\n      } : dataFilter = {\n        items: data\n      }\n\n      const activeUpdate = searchActiveEl(this.updateList) || undefined;\n\n      if(activeUpdate) {\n        activeUpdate.innerText === \"newest\" ? dataFilter.items = sortByNewest(dataFilter.items) : null;\n        activeUpdate.innerText === \"oldest\" ? dataFilter.items = sortByOldest(dataFilter.items) : null;\n      }\n      this.createRepList(dataFilter);\n    });\n\n    this.updateList.addEventListener(\"click\", (evt) => {\n      evt.preventDefault();\n      const updateLinks = update.querySelectorAll(\".dropdown-item\");\n      updateLinks.forEach((link) => link.classList.remove(\"active\"));\n      evt.target.classList.add(\"active\");\n      let filterName = evt.target.innerText;\n\n      let sortData = {};\n      filterName === \"newest\" ? sortData.items = sortByNewest([...data]) : sortData.items = sortByOldest([...data]);\n      const activeLang = searchActiveEl(this.langList) || \"all\";\n\n      if(activeLang.innerHTML !== \"all\" && activeLang.innerHTML !== undefined) {\n        let sortDataByLang = [];\n        sortData.items.forEach((item) => {\n          if(item.language === activeLang.innerText || item.language === null && activeLang.innerHTML === \"content\") {\n            sortDataByLang.push(item);\n          }\n        });\n        sortData.items = sortDataByLang;\n      }\n\n      this.createRepList(sortData);\n    });\n\n    this.reset.addEventListener(\"click\", () => {\n      const allItems = {\n        items: data\n      }\n      this.createRepList(allItems);\n    })\n  };\n\n  init(data) {\n    this.createRepList(data);\n    this.createLangList(data.items);\n    this.creatUpdateList([\"newest\", \"oldest\"]);\n    this.initializeEvents(data.items);\n    removePreloader(\"jumbotron\");\n  }\n}\n\n\nconst runApp = async () => {\n  try {\n    const Service = new GitHubService();\n    const app = new App();\n    const data = await Service.getPopularRepositories();\n    app.init(data);\n  } catch(error) {\n    console.error(`APPLICATION ERROR! ${error}`);\n  }\n}\n\nrunApp();\n"],"names":[],"mappings":"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"}